{% extends 'base.html.twig' %}

{% block body %}
    <div class="container d-flex justify-content-center align-items-center" style="min-height: 100vh;">
        <div class="card shadow-sm" style="width: 350px;">
            <div class="card-header bg-primary text-white text-center">
                <h5 class="card-title mb-0">Payment Information</h5>
            </div>
            <div class="card-body">
               {{ form_start(form, { 'action': path('app_payment_new', {'packId': pack.id}), 'method': 'POST', 'attr': {'id': 'payment-form', 'class': 'payment-form'} }) }} 

                    <div class="mb-3">
                        <label for="paymentMethod" class="form-label">Payment Method</label>
                        {{ form_widget(form.paymentMethod, {
                            'attr': {
                                'class': 'form-select p-3 mb-3',
                            }
                        }) }}
                    </div>

                    <div class="mb-3">
                        <label for="cardNumber" class="form-label">Card Number</label>
                        {{ form_widget(form.cardNumber, {
                            'attr': {
                                'class': 'form-control p-3 mb-3',
                                'maxlength': '16',
                                'placeholder': 'Enter card number'
                            }
                        }) }}
                    </div>

                    <div class="mb-3 d-flex justify-content-between">
                        <div class="w-48">
                            <label for="cardExpiration" class="form-label">Expiration (MM/YY)</label>
                            {{ form_widget(form.cardExpiration, {
                                'attr': {
                                    'class': 'form-control p-3 mb-3',
                                    'placeholder': 'MM/YY'
                                }
                            }) }}
                        </div>
                        <div class="w-48">
                            <label for="cardCVV" class="form-label">CVV</label>
                            {{ form_widget(form.cardCVV, {
                                'attr': {
                                    'class': 'form-control p-3 mb-3',
                                    'maxlength': '3',
                                    'placeholder': 'CVV'
                                }
                            }) }}
                        </div>
                    </div>

                    <div class="card-footer text-end">
                        <!-- Open Confirmation Modal -->
                        <button type="button" class="btn btn-primary px-5 py-2 text-white" data-bs-toggle="modal" data-bs-target="#confirmPaymentModal">
                            {{ button_label|default('Submit Payment') }}
                        </button>
                    </div>
                
                {{ form_end(form) }}
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal fade" id="confirmPaymentModal" tabindex="-1" aria-labelledby="confirmPaymentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmPaymentModalLabel">Confirm Payment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to proceed with this payment?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="document.getElementById('payment-form').submit();">
                        Yes, Pay Now
                    </button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
